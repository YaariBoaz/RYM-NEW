<div class="container-fluid">
  <app-page-title title="Saas" [breadcrumbItems]="breadCrumbItems"></app-page-title>
  <div class="row">
    <div class="col-lg-12">
      <div class="card">
        <div class="card-body">
          <div class="row">
            <div class="col-lg-4 border-right">
              <div class="d-flex flex-column">
                <h5>Water Consumption</h5>
                <span class="font-size-16 font-weight-light">Nov, 2023</span>
              </div>
            </div>

            <div class="col-lg-4 border-right">
              <div class=" mt-4 mt-lg-0">
                <div class="row">
                  <div class="col-12 d-flex flex-column">
                    <h5>Monthly Low-Rate Threshold Value</h5>
                    <span class="font-size-16 font-weight-light"> {{(cardsData$ | async).data.monthlyLowRate + ' '
                    + (cardsData$ | async).data.uom}}</span>

                  </div>
                </div>
              </div>
            </div>

            <div class="col-lg-4 d-none d-lg-block">
              <div *ngFor="let meter of metersData$ | async; index as i" class="d-flex flex-column">
                <h5>Water Meter: {{meter.meterSn}}</h5>
                <span class="font-size-16 font-weight-light">{{meter.fullAddress}}</span>
              </div>
            </div>
          </div>
          <!-- end row -->
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-xl-8">
      <div class="row">
        <div class="col-sm-4">
          <div class="card">
            <div class="card-body">
              <div class="d-flex align-items-center mb-3">
                <div class="avatar-xs me-3">
                                    <span
                                      class="avatar-title rounded-circle bg-primary-subtle text-primary font-size-18">
                                        <i class="bx bx-copy-alt"></i>
                                    </span>
                </div>
                <h5 class="font-size-14 mb-0">Current Meter Reading</h5>
              </div>
              <div class="text-muted mt-4">
                <h4>{{(cardsData$ | async).data.currentMeterReading | number : '1.2-2'}}</h4>
              </div>
            </div>
          </div>
        </div>

        <div class="col-sm-4">
          <div class="card">
            <div class="card-body">
              <div class="d-flex align-items-center mb-3">
                <div class="avatar-xs me-3">
                                    <span
                                      class="avatar-title rounded-circle bg-primary-subtle text-primary font-size-18">
                                        <i class="bx bx-archive-in"></i>
                                    </span>
                </div>
                <h5 class="font-size-14 mb-0">Current Month Consumption</h5>
              </div>
              <div class="text-muted mt-4">
                <h4>{{(cardsData$ | async).data.currentMonthConsumption | number : '1.2-2'}}</h4>
              </div>
            </div>
          </div>
        </div>

        <div class="col-sm-4">
          <div class="card">
            <div class="card-body">
              <div class="d-flex align-items-center mb-3">
                <div class="avatar-xs me-3">
                                    <span
                                      class="avatar-title rounded-circle bg-primary-subtle text-primary font-size-18">
                                        <i class="bx bx-purchase-tag-alt"></i>
                                    </span>
                </div>
                <h5 class="font-size-14 mb-0">End of Month Forecast</h5>
              </div>
              <div class="text-muted mt-4">
                <h4>{{(cardsData$ | async).data.endOfMonthForecast | number : '1.2-2'}}</h4>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- end row -->
    </div>
    <div class="col-xl-4">
      <div class="card">
        <div class="card-body bg-primary-subtle ">
          <div class="d-flex">
            <h4 class="text-center">Get informed about water consumption while away from home</h4>
          </div>
          <div class="text-muted mt-2 justify-content-center d-flex">
            <button class="btn btn-primary btn-lg waves-effect waves-light">DEFINE DATES</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-xl-8">
      <div class="card">
        <div class="card-body">
          <ul class="nav nav-tabs nav-tabs-custom nav-justified" role="tablist">
            <li class="nav-item tab" role="presentation" (click)="activeTab =0">
              <a class="nav-link active pe-auto" data-bs-toggle="tab" role="tab" aria-selected="true"
                 [class.active]="activeTab ===0">
                <span class="d-block d-sm-none"><i class="fas fa-home"></i></span>
                <span class="d-none d-sm-block">Home</span>
              </a>
            </li>
            <li class="nav-item tab" role="presentation" (click)="activeTab =1">
              <a class="nav-link pe-auto" data-bs-toggle="tab" role="tab" aria-selected="false" tabindex="-1"
                 [class.active]="activeTab ===1">
                <span class="d-block d-sm-none"><i class="far fa-user"></i></span>
                <span class="d-none d-sm-block">Profile</span>
              </a>
            </li>
          </ul>
          <div class="tab-content p-3 text-muted">

            <div class="tab-pane active" role="tabpanel" [class.hidden]="activeTab ===1"
                 [class.visible]="activeTab ===0">
              <div class="chart-header d-flex">
                <ul class="nav nav-pills bg-light rounded width-fit-content" role="tablist">
                  <li role="button" class="nav-item" (click)="isMonthly = !isMonthly">
                    <a class="nav-link" [class.active]="isMonthly">Monthly</a>
                  </li>
                  <li role="button" class="nav-item" (click)="isMonthly = !isMonthly">
                    <a class="nav-link active" [class.active]="!isMonthly">Daily</a>
                  </li>
                </ul>
                <div class="date-pickers ml-3">
                  <div bsDatepicker class="picker-wrapper" (bsValueChange)="onDateValueChange($event,0)" (onShown)="onOpenCalendar($event)" [bsConfig]="{dateInputFormat: 'MM/YYYY'}">
                    <i class="far fa-calendar-alt"></i>
                    <span>{{fromDate}}</span>
                  </div>
                  <div class="picker-wrapper" bsDatepicker [bsConfig]="{dateInputFormat: 'MM/YYYY'}"
                       (onShown)="onOpenCalendar($event)" (bsValueChange)="onDateValueChange($event,1)">
                    <i class="far fa-calendar-alt"></i>
                    <span>{{toDate}}</span>
                  </div>
                </div>
              </div>
              <div class="chart-body">
                <app-monthly-consumption-chart></app-monthly-consumption-chart>
              </div>
            </div>
            <div class="tab-pane" role="tabpanel" [class.hidden]="activeTab ===0" [class.visible]="activeTab ===1">
              <p class="mb-0">
                Food truck fixie locavore, accusamus mcsweeney's marfa nulla
                single-origin coffee squid. Exercitation +1 labore velit, blog
                sartorial PBR leggings next level wes anderson artisan four loko
                farm-to-table craft beer twee. Qui photo booth letterpress,
                commodo enim craft beer mlkshk aliquip jean shorts ullamco ad
                vinyl cillum PBR. Homo nostrud organic, assumenda labore
                aesthetic magna delectus.
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-xl-4">
      <div class="card">
        <div class="card-body">
          <div class="card-title">
            <h5>Alerts</h5>
          </div>
          <div *ngFor="let alert of alerts$ | async; index as i" class="card border border-danger">
            <div class="card-body row alert-row">
              <div class="col-xl-8 alert-row-desc-and-icon">
                <div class="alert-icon">
                  <img *ngIf="alert.alertTypeId == 16" src="assets/images/alerts/leak_in_meter.png"/>
                  <img *ngIf="alert.alertTypeId == '35'" src="assets/images/alerts/meter-leak.svg"/>
                </div>
                <div class="alert-description">
                  {{alert.alertTypeName}}
                </div>
              </div>
              <div class="col-xl-4">
                {{alert.alertTime}}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- end row -->

  <div class="row">
    <div class="col-xl-4">
      <div class="card">
        <div class="card-body">
          <div class="clearfix">
            <div class="float-end">
              <div class="input-group input-group-sm">
                <select class="form-select form-select-sm" (change)="sellingProduct($event)">
                  <option value="january" selected>Jan</option>
                  <option value="december">Dec</option>
                  <option value="november">Nov</option>
                  <option value="october">Oct</option>
                </select>
                <label class="input-group-text">Month</label>

              </div>
            </div>
            <h4 class="card-title mb-4">Top Selling product</h4>
          </div>
          <div *ngFor="let data of sassTopSelling">
            <div class="text-muted text-center">
              <p class="mb-2">{{ data.title }}</p>
              <h4>{{ data.amount }}</h4>
              <p class="mt-4 mb-0"><span class="badge badge-soft-success font-size-11 me-2"> {{
                data.revenue }}% <i class="mdi mdi-arrow-up"></i> </span> From previous period</p>
            </div>

            <div class="table-responsive mt-4">
              <table class="table align-middle mb-0">
                <tbody>
                <tr *ngFor="let item of data.list">
                  <td>
                    <h5 class="font-size-14 mb-1">{{ item.name }}</h5>
                    <p class="text-muted mb-0">{{ item.text }}</p>
                  </td>

                  <td>
                    <app-sellingchart :value={{item.sales}} :Chartcolor="{{item.chartVariant}}">
                    </app-sellingchart>
                  </td>
                  <td>
                    <p class="text-muted mb-1">Sales</p>
                    <h5 class="mb-0">{{ item.sales }} %</h5>
                  </td>
                </tr>

                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-xl-4">
      <div class="card">
        <div class="card-body">
          <h4 class="card-title mb-4">Tasks</h4>
          <tabset class="nav-pills tab-bg bg-light rounded">
            <tab>
              <ng-template tabHeading>
                <p class="fw-bold mb-0">In Process</p>
              </ng-template>
              <ngx-simplebar style="height: 250px; margin-top:20px ;">
                <div class="table-responsive">
                  <table class="table table-nowrap align-middle table-hover mb-0">
                    <tbody>
                    <tr>
                      <td style="width: 50px;">
                        <div class="form-check">
                          <input class="form-check-input" type="checkbox" id="tasklistCheck01">
                          <label class="form-check-label" for="tasklistCheck01"></label>
                        </div>
                      </td>
                      <td>
                        <h5 class="text-truncate font-size-14 mb-1"><a href="javascript: void(0);" class="text-dark">Skote
                          Saas
                          Dashboard</a></h5>
                        <p class="text-muted mb-0">Assigned to Mark</p>
                      </td>
                      <td style="width: 90px;">
                        <div>
                          <ul class="list-inline mb-0 font-size-16">
                            <li class="list-inline-item">
                              <a href="javascript: void(0);" class="text-success p-1"><i
                                class="bx bxs-edit-alt"></i></a>
                            </li>
                            <li class="list-inline-item">
                              <a href="javascript: void(0);" class="text-danger p-1"><i class="bx bxs-trash"></i></a>
                            </li>
                          </ul>
                        </div>
                      </td>
                    </tr>

                    <tr>
                      <td style="width: 50px;">
                        <div class="form-check">
                          <input class="form-check-input" type="checkbox" id="tasklistCheck02">
                          <label class="form-check-label" for="tasklistCheck02"></label>
                        </div>
                      </td>
                      <td>
                        <h5 class="text-truncate font-size-14 mb-1"><a href="javascript: void(0);" class="text-dark">New
                          Landing UI</a>
                        </h5>
                        <p class="text-muted mb-0">Assigned to Team A</p>
                      </td>
                      <td>
                        <div>
                          <ul class="list-inline mb-0 font-size-16">
                            <li class="list-inline-item">
                              <a href="javascript: void(0);" class="text-success p-1"><i
                                class="bx bxs-edit-alt"></i></a>
                            </li>
                            <li class="list-inline-item">
                              <a href="javascript: void(0);" class="text-danger p-1"><i class="bx bxs-trash"></i></a>
                            </li>
                          </ul>
                        </div>
                      </td>
                    </tr>

                    <tr>
                      <td style="width: 50px;">
                        <div class="form-check">
                          <input class="form-check-input" type="checkbox" id="tasklistCheck02">
                          <label class="form-check-label" for="tasklistCheck02"></label>
                        </div>
                      </td>
                      <td>
                        <h5 class="text-truncate font-size-14 mb-1"><a href="javascript: void(0);" class="text-dark">Brand
                          logo
                          design</a></h5>
                        <p class="text-muted mb-0">Assigned to Janis</p>
                      </td>
                      <td>
                        <div>
                          <ul class="list-inline mb-0 font-size-16">
                            <li class="list-inline-item">
                              <a href="javascript: void(0);" class="text-success p-1"><i
                                class="bx bxs-edit-alt"></i></a>
                            </li>
                            <li class="list-inline-item">
                              <a href="javascript: void(0);" class="text-danger p-1"><i class="bx bxs-trash"></i></a>
                            </li>
                          </ul>
                        </div>
                      </td>
                    </tr>

                    <tr>
                      <td style="width: 50px;">
                        <div class="form-check">
                          <input class="form-check-input" type="checkbox" id="tasklistCheck04">
                          <label class="form-check-label" for="tasklistCheck04"></label>
                        </div>
                      </td>
                      <td>
                        <h5 class="text-truncate font-size-14 mb-1"><a href="javascript: void(0);" class="text-dark">Blog
                          Template
                          UI</a></h5>
                        <p class="text-muted mb-0">Assigned to Dianna</p>
                      </td>
                      <td>
                        <div>
                          <ul class="list-inline mb-0 font-size-16">
                            <li class="list-inline-item">
                              <a href="javascript: void(0);" class="text-success p-1"><i
                                class="bx bxs-edit-alt"></i></a>
                            </li>
                            <li class="list-inline-item">
                              <a href="javascript: void(0);" class="text-danger p-1"><i class="bx bxs-trash"></i></a>
                            </li>
                          </ul>
                        </div>
                      </td>
                    </tr>

                    <tr>
                      <td style="width: 50px;">
                        <div class="form-check">
                          <input class="form-check-input" type="checkbox" id="tasklistCheck05">
                          <label class="form-check-label" for="tasklistCheck05"></label>
                        </div>
                      </td>
                      <td>
                        <h5 class="text-truncate font-size-14 mb-1"><a href="javascript: void(0);" class="text-dark">Multipurpose
                          Landing</a></h5>
                        <p class="text-muted mb-0">Assigned to Team B</p>
                      </td>
                      <td>
                        <div>
                          <ul class="list-inline mb-0 font-size-16">
                            <li class="list-inline-item">
                              <a href="javascript: void(0);" class="text-success p-1"><i
                                class="bx bxs-edit-alt"></i></a>
                            </li>
                            <li class="list-inline-item">
                              <a href="javascript: void(0);" class="text-danger p-1"><i class="bx bxs-trash"></i></a>
                            </li>
                          </ul>
                        </div>
                      </td>
                    </tr>
                    <tr>
                      <td style="width: 50px;">
                        <div class="form-check">
                          <input class="form-check-input" type="checkbox" id="tasklistCheck06">
                          <label class="form-check-label" for="tasklistCheck06"></label>
                        </div>
                      </td>
                      <td>
                        <h5 class="text-truncate font-size-14 mb-1"><a href="javascript: void(0);" class="text-dark">Redesign
                          -
                          Landing
                          page</a></h5>
                        <p class="text-muted mb-0">Assigned to Jerry</p>
                      </td>
                      <td>
                        <div>
                          <ul class="list-inline mb-0 font-size-16">
                            <li class="list-inline-item">
                              <a href="javascript: void(0);" class="text-success p-1"><i
                                class="bx bxs-edit-alt"></i></a>
                            </li>
                            <li class="list-inline-item">
                              <a href="javascript: void(0);" class="text-danger p-1"><i class="bx bxs-trash"></i></a>
                            </li>
                          </ul>
                        </div>
                      </td>
                    </tr>
                    <tr>
                      <td style="width: 50px;">
                        <div class="form-check">
                          <input class="form-check-input" type="checkbox" id="tasklistCheck07">
                          <label class="form-check-label" for="tasklistCheck07"></label>
                        </div>
                      </td>
                      <td>
                        <h5 class="text-truncate font-size-14 mb-1"><a href="javascript: void(0);" class="text-dark">Skote
                          Crypto
                          Dashboard</a></h5>
                        <p class="text-muted mb-0">Assigned to Eric</p>
                      </td>
                      <td>
                        <div>
                          <ul class="list-inline mb-0 font-size-16">
                            <li class="list-inline-item">
                              <a href="javascript: void(0);" class="text-success p-1"><i
                                class="bx bxs-edit-alt"></i></a>
                            </li>
                            <li class="list-inline-item">
                              <a href="javascript: void(0);" class="text-danger p-1"><i class="bx bxs-trash"></i></a>
                            </li>
                          </ul>
                        </div>
                      </td>
                    </tr>
                    </tbody>
                  </table>
                </div>
              </ngx-simplebar>
            </tab>
            <tab>
              <ng-template tabHeading>
                <p class="fw-bold mb-0">Upcoming</p>
              </ng-template>
              <ngx-simplebar style="height: 250px; margin-top:20px">
                <div class="table-responsive mb-0">
                  <table class="table table-nowrap align-middle table-centered table-hover">
                    <tbody>
                    <tr>
                      <td style="width: 50px;">
                        <div class="form-check">
                          <input class="form-check-input" type="checkbox" id="tasklistCheck01">
                          <label class="form-check-label" for="tasklistCheck01"></label>
                        </div>
                      </td>
                      <td>
                        <h5 class="text-truncate font-size-14 mb-1"><a href="javascript: void(0);" class="text-dark">Skote
                          Saas
                          Dashboard</a></h5>
                        <p class="text-muted mb-0">Assigned to Mark</p>
                      </td>
                      <td style="width: 90px;">
                        <div>
                          <ul class="list-inline mb-0 font-size-16">
                            <li class="list-inline-item">
                              <a href="javascript: void(0);" class="text-success p-1"><i
                                class="bx bxs-edit-alt"></i></a>
                            </li>
                            <li class="list-inline-item">
                              <a href="javascript: void(0);" class="text-danger p-1"><i class="bx bxs-trash"></i></a>
                            </li>
                          </ul>
                        </div>
                      </td>
                    </tr>

                    <tr>
                      <td>
                        <div class="form-check">
                          <input class="form-check-input" type="checkbox" id="tasklistCheck02">
                          <label class="form-check-label" for="tasklistCheck02"></label>
                        </div>
                      </td>
                      <td>
                        <h5 class="text-truncate font-size-14 mb-1"><a href="javascript: void(0);" class="text-dark">New
                          Landing UI</a>
                        </h5>
                        <p class="text-muted mb-0">Assigned to Team A</p>
                      </td>
                      <td>
                        <div>
                          <ul class="list-inline mb-0 font-size-16">
                            <li class="list-inline-item">
                              <a href="javascript: void(0);" class="text-success p-1"><i
                                class="bx bxs-edit-alt"></i></a>
                            </li>
                            <li class="list-inline-item">
                              <a href="javascript: void(0);" class="text-danger p-1"><i class="bx bxs-trash"></i></a>
                            </li>
                          </ul>
                        </div>
                      </td>
                    </tr>

                    <tr>
                      <td>
                        <div class="form-check">
                          <input class="form-check-input" type="checkbox" id="tasklistCheck02">
                          <label class="form-check-label" for="tasklistCheck02"></label>
                        </div>
                      </td>
                      <td>
                        <h5 class="text-truncate font-size-14 mb-1"><a href="javascript: void(0);" class="text-dark">Brand
                          logo
                          design</a></h5>
                        <p class="text-muted mb-0">Assigned to Janis</p>
                      </td>
                      <td>
                        <div>
                          <ul class="list-inline mb-0 font-size-16">
                            <li class="list-inline-item">
                              <a href="javascript: void(0);" class="text-success p-1"><i
                                class="bx bxs-edit-alt"></i></a>
                            </li>
                            <li class="list-inline-item">
                              <a href="javascript: void(0);" class="text-danger p-1"><i class="bx bxs-trash"></i></a>
                            </li>
                          </ul>
                        </div>
                      </td>
                    </tr>

                    <tr>
                      <td>
                        <div class="form-check">
                          <input class="form-check-input" type="checkbox" id="tasklistCheck04">
                          <label class="form-check-label" for="tasklistCheck04"></label>
                        </div>
                      </td>
                      <td>
                        <h5 class="text-truncate font-size-14 mb-1"><a href="javascript: void(0);" class="text-dark">Blog
                          Template
                          UI</a></h5>
                        <p class="text-muted mb-0">Assigned to Dianna</p>
                      </td>
                      <td>
                        <div>
                          <ul class="list-inline mb-0 font-size-16">
                            <li class="list-inline-item">
                              <a href="javascript: void(0);" class="text-success p-1"><i
                                class="bx bxs-edit-alt"></i></a>
                            </li>
                            <li class="list-inline-item">
                              <a href="javascript: void(0);" class="text-danger p-1"><i class="bx bxs-trash"></i></a>
                            </li>
                          </ul>
                        </div>
                      </td>
                    </tr>

                    <tr>
                      <td>
                        <div class="form-check">
                          <input class="form-check-input" type="checkbox" id="tasklistCheck05">
                          <label class="form-check-label" for="tasklistCheck05"></label>
                        </div>
                      </td>
                      <td>
                        <h5 class="text-truncate font-size-14 mb-1"><a href="javascript: void(0);" class="text-dark">Multipurpose
                          Landing</a></h5>
                        <p class="text-muted mb-0">Assigned to Team B</p>
                      </td>
                      <td>
                        <div>
                          <ul class="list-inline mb-0 font-size-16">
                            <li class="list-inline-item">
                              <a href="javascript: void(0);" class="text-success p-1"><i
                                class="bx bxs-edit-alt"></i></a>
                            </li>
                            <li class="list-inline-item">
                              <a href="javascript: void(0);" class="text-danger p-1"><i class="bx bxs-trash"></i></a>
                            </li>
                          </ul>
                        </div>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <div class="form-check">
                          <input class="form-check-input" type="checkbox" id="tasklistCheck06">
                          <label class="form-check-label" for="tasklistCheck06"></label>
                        </div>
                      </td>
                      <td>
                        <h5 class="text-truncate font-size-14 mb-1"><a href="javascript: void(0);" class="text-dark">Redesign
                          -
                          Landing
                          page</a></h5>
                        <p class="text-muted mb-0">Assigned to Jerry</p>
                      </td>
                      <td>
                        <div>
                          <ul class="list-inline mb-0 font-size-16">
                            <li class="list-inline-item">
                              <a href="javascript: void(0);" class="text-success p-1"><i
                                class="bx bxs-edit-alt"></i></a>
                            </li>
                            <li class="list-inline-item">
                              <a href="javascript: void(0);" class="text-danger p-1"><i class="bx bxs-trash"></i></a>
                            </li>
                          </ul>
                        </div>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <div class="form-check">
                          <input class="form-check-input" type="checkbox" id="tasklistCheck07">
                          <label class="form-check-label" for="tasklistCheck07"></label>
                        </div>
                      </td>
                      <td>
                        <h5 class="text-truncate font-size-14 mb-1"><a href="javascript: void(0);" class="text-dark">Skote
                          Crypto
                          Dashboard</a></h5>
                        <p class="text-muted mb-0">Assigned to Eric</p>
                      </td>
                      <td>
                        <div>
                          <ul class="list-inline mb-0 font-size-16">
                            <li class="list-inline-item">
                              <a href="javascript: void(0);" class="text-success p-1"><i
                                class="bx bxs-edit-alt"></i></a>
                            </li>
                            <li class="list-inline-item">
                              <a href="javascript: void(0);" class="text-danger p-1"><i class="bx bxs-trash"></i></a>
                            </li>
                          </ul>
                        </div>
                      </td>
                    </tr>
                    </tbody>
                  </table>
                </div>
              </ngx-simplebar>
            </tab>
          </tabset>
        </div>

        <div class="card-footer bg-transparent border-top">
          <div class="text-center">
            <a href="javascript: void(0);" class="btn btn-primary"> Add new
              Task</a>
          </div>
        </div>
      </div>
    </div>

    <div class="col-xl-4">
      <div class="card">
        <div class="card-body border-bottom">
          <div class="row">
            <div class="col-md-4 col-9">
              <h5 class="font-size-15 mb-1">Steven Franklin</h5>
              <p class="text-muted mb-0"><i class="mdi mdi-circle text-success align-middle me-1"></i>
                Active now</p>
            </div>
            <div class="col-md-8 col-3">
              <ul class="list-inline user-chat-nav text-end mb-0">
                <li class="list-inline-item d-none d-sm-inline-block">
                  <div class="dropdown" dropdown>
                    <button class="btn nav-btn dropdown-toggle" type="button" data-toggle="dropdown"
                            aria-haspopup="true" aria-expanded="false" dropdownToggle>
                      <i class="bx bx-search-alt-2"></i>
                    </button>
                    <div class="dropdown-menu dropdown-menu-end dropdown-menu-md" *dropdownMenu>
                      <form class="p-3">
                        <div class="m-0">
                          <div class="input-group">
                            <input type="text" class="form-control" placeholder="Search ..."
                                   aria-label="Recipient's username">
                            <div class="input-group-append">
                              <button class="btn btn-primary" type="submit"><i class="mdi mdi-magnify"></i></button>
                            </div>
                          </div>
                        </div>
                      </form>
                    </div>
                  </div>
                </li>
                <li class="list-inline-item d-none d-sm-inline-block">
                  <div class="dropdown" dropdown>
                    <button class="btn nav-btn dropdown-toggle" type="button" data-toggle="dropdown"
                            aria-haspopup="true" aria-expanded="false" dropdownToggle>
                      <i class="bx bx-cog"></i>
                    </button>
                    <div class="dropdown-menu dropdown-menu-end" *dropdownMenu>
                      <a class="dropdown-item" href="javascript: void(0);">View Profile</a>
                      <a class="dropdown-item" href="javascript: void(0);">Clear chat</a>
                      <a class="dropdown-item" href="javascript: void(0);">Muted</a>
                      <a class="dropdown-item" href="javascript: void(0);">Delete</a>
                    </div>
                  </div>
                </li>

                <li class="list-inline-item">
                  <div class="dropdown" dropdown>
                    <button class="btn nav-btn dropdown-toggle" type="button" data-toggle="dropdown"
                            aria-haspopup="true" aria-expanded="false" dropdownToggle>
                      <i class="bx bx-dots-horizontal-rounded"></i>
                    </button>
                    <div class="dropdown-menu dropdown-menu-end" *dropdownMenu>
                      <a class="dropdown-item" href="javascript: void(0);">Action</a>
                      <a class="dropdown-item" href="javascript: void(0);">Another action</a>
                      <a class="dropdown-item" href="javascript: void(0);">Something else</a>
                    </div>
                  </div>
                </li>

              </ul>
            </div>
          </div>
        </div>
        <div class="card-body pb-0">
          <div>
            <div class="chat-conversation">
              <ul class="list-unstyled">
                <ngx-simplebar style="height: 260px;" #scrollRef>
                  <li>
                    <div class="chat-day-title">
                      <span class="title">Today</span>
                    </div>
                  </li>
                  <li *ngFor="let data of ChatData" [ngClass]="{ 'right': data.align === 'right' }">
                    <div class="conversation-list">
                      <div class="dropdown" dropdown>
                        <a class="dropdown-toggle" href="javascript: void(0);" role="button" data-toggle="dropdown"
                           aria-haspopup="true" aria-expanded="false" dropdownToggle>
                          <i class="bx bx-dots-vertical-rounded"></i>
                        </a>
                        <div class="dropdown-menu" *dropdownMenu>
                          <a class="dropdown-item" href="javascript: void(0);">Copy</a>
                          <a class="dropdown-item" href="javascript: void(0);">Save</a>
                          <a class="dropdown-item" href="javascript: void(0);">Forward</a>
                          <a class="dropdown-item" href="javascript: void(0);">Delete</a>
                        </div>
                      </div>
                      <div class="ctext-wrap">
                        <div class="conversation-name">{{data.name}}</div>
                        <p>
                          {{data.message}}
                        </p>
                        <p class="chat-time mb-0"><i class="bx bx-time-five align-middle mr-1"></i>
                          {{data.time}}</p>
                      </div>
                    </div>
                  </li>
                </ngx-simplebar>
              </ul>
            </div>

          </div>
        </div>

        <div class="p-3 chat-input-section">

          <form (ngSubmit)="messageSave()" [formGroup]="formData" class="row">
            <div class="col">
              <div class="position-relative">
                <input type="text" class="form-control rounded chat-input" placeholder="Enter Message..."
                       formControlName="message" [ngClass]="{'is-invalid': chatSubmit && form.message.errors}">
                <div *ngIf="chatSubmit && form.message.errors" class="invalid-feedback">
                  <span *ngIf="form.message.errors.required">Message is required.</span>
                </div>
                <div class="chat-input-links">
                  <ul class="list-inline mb-0">
                    <li class="list-inline-item"><a href="javascript: void(0);" placement="top" tooltip="Emoji"><i
                      class="mdi mdi-emoticon-happy-outline"></i></a>
                    </li>
                    <li class="list-inline-item"><a href="javascript: void(0);" placement="top" tooltip="Images"><i
                      class="mdi mdi-file-image-outline"></i></a></li>
                    <li class="list-inline-item"><a href="javascript: void(0);" placement="top" tooltip="Add Files"><i
                      class="mdi mdi-file-document-outline"></i></a>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="col-auto">
              <button type="submit" class="btn btn-primary chat-send w-md"><span class="d-none d-sm-inline-block me-2">Send</span>
                <i class="mdi mdi-send"></i></button>
            </div>
          </form>

        </div>
      </div>
    </div>
  </div>

</div>
